# Implementation Plan: Fix Post-Init Configuration Property Mismatch

## ANALYZE

- **Problem**: The setup wizard generates `post_init` (underscore) in config files but the code expects `'post-init'` (hyphen)
- **Root Cause**: Inconsistency between setup wizard config generation (`post_init`) and type definitions + runtime code (`'post-init'`)
- **Evidence**: User's `~/.space-config.yaml` has `post_init:` but CLI logs show "No post-init command configured"
- **Affected Files**:
  - `src/services/setupWizard.ts` (generates `post_init`)
  - `src/types/index.ts` (defines `'post-init'`)
  - `src/commands/init.ts` (reads `'post-init'`)
- **Current Behavior**: Post-init commands are silently ignored when using configs generated by the setup wizard
- **Expected Behavior**: Post-init commands should execute regardless of whether the property uses underscore or hyphen

## DESIGN

Two possible solutions:

1. **Fix at source**: Change setup wizard to generate `'post-init'` (breaking change for existing configs)
2. **Fix at runtime**: Update config loading to normalize both formats (backward compatible)

**Chosen Solution**: Option 2 - Runtime normalization for backward compatibility.

**Implementation Strategy**:

- Add property normalization in `ConfigManager.loadConfig()` after YAML parsing
- Support both `post_init` and `'post-init'` formats
- Convert `post_init` to `'post-init'` internally for consistency
- Add logging to show when normalization occurs

## PLAN

- [ ] Add property normalization in `src/utils/config.ts` in the `loadConfig()` method
- [ ] Update the normalization to convert `post_init` â†’ `'post-init'` for each project
- [ ] Add verbose logging when property normalization occurs
- [ ] Add unit tests for config property normalization
- [ ] Test with both underscore and hyphen formats
- [ ] Test the actual CLI command to verify post-init now executes
- [ ] Validate that dry-run shows the post-init command would execute
- [ ] **[FUTURE]** Consider updating setup wizard to generate consistent property names
- [ ] **[LOW PRIORITY]** Run `eslint --fix` and `prettier --write` across modified files

## NOTES

- This is a backward compatibility fix - existing configs with `post_init` should continue working
- The normalization should be transparent to users
- We should log when normalization occurs for debugging purposes
- Future configs generated by the setup wizard should ideally use the canonical format
